# Activity Summary for 10/23/2025

## 1:27:54 PM
The logged changes describe the setup of a `log4shell-demo` project, likely for educational or testing purposes, focusing on the Log4j vulnerability. All modifications occurred on 10/23/2025, within a concise period from 12:45 PM to 1:11 PM, indicating a single concentrated development session.

**File-Specific Updates:**

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/pom.xml`**:
    *   **Initial setup (12:45:06 PM):** The project was initialized as a Maven project `log4shell-sim`, configured for Java 11, and included the `maven-shade-plugin` to create a fat jar with `com.demo.VulnServer` as the main class.
    *   **Significant update (1:05:09 PM):** The `artifactId` was changed to `log4j-demo`. Crucially, dependencies for `log4j-api` and `log4j-core` (version 2.14.1) were added, explicitly noted as "Vulnerable Log4j for demo (run ONLY in isolated lab)," highlighting the project's purpose.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/log4j2.xml` (1:05:57 PM):**
    *   A new Log4j configuration file was added. It defines a basic `Console` appender with a standard pattern layout and sets the `Root` logger level to `info`.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/VulnServer.java` (1:08:26 PM):**
    *   A new Java file `VulnServer` was introduced. This class sets up an HTTP server listening on `127.0.0.1:8080`.
    *   It logs the `User-Agent` header of incoming requests using the configured Log4j logger (`logger.info("Received User-Agent: " + ua)`), demonstrating where untrusted input could trigger the Log4j vulnerability.
    *   A critical safety mechanism is noted: instead of relying on Log4j's JNDI/remote classloading, it explicitly calls `SafeLoader.tryHandleLookup(ua)` for a controlled demonstration.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/demo/SafeLoader.java` (1:09:29 PM):**
    *   This new `SafeLoader` class is central to the controlled demonstration. It uses a regex to identify JNDI lookup patterns in an input string.
    *   **Key safety feature:** It strictly whitelists the URL from which a class can be loaded to `http://127.0.0.1:8000/ExploitClass.class`. Any other URL is rejected.
    *   It includes functionality to fetch class bytes from the allowed URL and load them using a custom `ClassLoader`, then instantiates the loaded class to confirm execution.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/exploit/ExploitClass.java` (1:11:12 PM):**
    *   A new `ExploitClass` file (without a package) was added in an `exploit` directory. This class contains `static` and constructor blocks that print messages, serving as a benign payload to confirm successful loading and execution within the `SafeLoader`'s controlled environment.

**Patterns and Recurring Elements:**

The changes consistently highlight a focus on demonstrating the Log4j vulnerability in a **controlled and safe manner**. This is evident through:
*   Explicit comments in `pom.xml` ("run ONLY in isolated lab").
*   The `VulnServer` bypassing direct Log4j JNDI handling in favor of `SafeLoader`.
*   The `SafeLoader`'s strict URL whitelisting (`http://127.0.0.1:8000/ExploitClass.class`).
*   The `ExploitClass` being labeled as "benign".

The project utilizes Maven for dependency management and building, including the `maven-shade-plugin` to create an executable jar. The development activity was concentrated within a short timeframe on a single day.

## 2:27:57 PM
The log details the setup and configuration of a `log4shell-demo` project over a concentrated period on October 23, 2025.

**File-Specific Updates:**

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/pom.xml`**
    *   **10/23/2025, 12:45:06 PM:** Initial Maven project configuration, defining `log4shell-sim` as the artifact ID and setting Java 11. It included the `maven-shade-plugin` to create a fat JAR with `com.demo.VulnServer` as the main class.
    *   **10/23/2025, 1:05:09 PM:** This file was significantly updated. The artifact ID changed to `log4j-demo`. Crucially, it introduced `dependencies` for `log4j-api` and `log4j-core`, both at the vulnerable `2.14.1` version, explicitly noting their use for a demo in an isolated lab. The `maven-shade-plugin` configuration remained consistent.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/log4j2.xml`**
    *   **10/23/2025, 1:05:57 PM:** A new file was added to configure Log4j2. It sets a `WARN` status, defines a console appender with a standard pattern layout, and configures the root logger to the `info` level. This file is essential for Log4j to function as intended in the demo.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/VulnServer.java`**
    *   **10/23/2025, 1:08:26 PM:** This new file defines `com.demo.VulnServer`, a simple HTTP server listening on `127.0.0.1:8080`. It uses the vulnerable Log4j by logging the `User-Agent` header from incoming requests (`logger.info("Received User-Agent: " + ua);`), which is the entry point for the Log4shell demonstration. The code also includes a call to `SafeLoader.tryHandleLookup(ua)`, indicating a controlled mechanism for handling potential JNDI lookups.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/demo/SafeLoader.java`**
    *   **10/23/2025, 1:09:29 PM:** This new file implements `com.demo.SafeLoader`. It's designed to parse JNDI lookup strings from input (`$\{jndi:...\}`), but with strict safety measures. It explicitly allows fetching class bytes *only* from `http://127.0.0.1:8000/ExploitClass.class` and loads this class using a custom ClassLoader to ensure local and controlled execution, printing messages about the process. This acts as a protective wrapper for the vulnerability demo.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/exploit/ExploitClass.java`**
    *   **10/23/2025, 1:11:12 PM:** This new file defines `ExploitClass` without a package. It contains a static initializer block and a constructor that print benign messages when executed, confirming that code loading and execution occurred as part of the safe demonstration.

**Timestamps of Significant Changes:**
All significant changes occurred within a relatively short timeframe on `10/23/2025`, primarily between `12:45 PM` and `1:11 PM`, suggesting a focused effort to set up this demonstration environment. The update to `pom.xml` at `1:05:09 PM` to include the vulnerable Log4j dependencies is a pivotal moment in establishing the demo's core functionality.

**Patterns or Recurring Elements:**
*   **Log4shell Demonstration:** The entire set of changes is geared towards demonstrating the Log4shell vulnerability. This is evident from the inclusion of specific Log4j versions, the `VulnServer` logging user input, and the controlled "exploit" class.
*   **Safety and Containment:** A strong recurring theme is the implementation of safety measures to contain the demonstration. The `pom.xml` explicitly warns about isolated lab use, `SafeLoader` strictly whitelists the exploitable URL and class, and `ExploitClass` contains only benign print statements.
*   **Maven Build:** The `pom.xml` consistently uses the `maven-shade-plugin` to create a "fat" JAR, indicating an intention to bundle all dependencies for easy deployment of the demo server.
*   **Localhost Focus:** The `VulnServer` listens on `127.0.0.1` and `SafeLoader` restricts fetching to `http://127.0.0.1:8000`, reinforcing the local and contained nature of the demo.

## 4:46:25 PM
The log captures a series of changes related to setting up a demonstration for the Log4Shell vulnerability, emphasizing how untrusted input can be processed by a vulnerable Log4j version, while also implementing safety measures. All changes occurred on 10/23/2025 within a short time frame, between 12:45:06 PM and 1:11:12 PM, indicating a concentrated development effort for this specific demo.

**File-specific updates:**

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/pom.xml**:
    *   **Initial setup (12:45:06 PM):** The `pom.xml` defines a Maven project named `log4shell-sim`, sets Java compiler source/target to 11, and configures the `maven-shade-plugin` to create a fat JAR with `com.demo.VulnServer` as the main class.
    *   **Key update (1:05:09 PM):** The `artifactId` was changed to `log4j-demo`. More significantly, `log4j-api` and `log4j-core` dependencies (both version `2.14.1`) were added, explicitly marking them as "Vulnerable Log4j for demo (run ONLY in isolated lab)". This addition is central to enabling the Log4Shell demonstration.

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/log4j2.xml (1:05:57 PM):**
    *   A new Log4j configuration file was added. It sets up a console appender with a specific pattern layout for logging (`%d{HH:mm:ss.SSS} %-5level %logger{36} - %msg%n`) and configures the root logger to output `info` level messages to this console. This file is crucial for Log4j's operation within the demo.

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/VulnServer.java (1:08:26 PM):**
    *   This new Java file introduces `com.demo.VulnServer`, an HTTP server listening on `127.0.0.1:8080`. Its primary function for the demo is to log the `User-Agent` header from incoming HTTP requests using the (now vulnerable) Log4j. This simulates how untrusted input reaches the logging mechanism. It also calls a `SafeLoader` to handle potential JNDI lookups found in the User-Agent string.

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/demo/SafeLoader.java (1:09:29 PM):**
    *   This new Java class implements `SafeLoader`, a critical component for the controlled demonstration. It uses a regular expression to detect JNDI lookup patterns in input strings. Crucially, it whitelists `http://127.0.0.1:8000/ExploitClass.class` as the *only* allowed URL for fetching remote classes, preventing arbitrary remote code execution in the demo environment. It then uses a custom `ClassLoader` to load and instantiate the `ExploitClass` locally, simulating the exploit but with strict safety.

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/exploit/ExploitClass.java (1:11:12 PM):**
    *   This new Java file defines `ExploitClass` (without a package). It contains simple `static` initializer and constructor methods that print messages. This class serves as the benign "payload" that `SafeLoader` fetches and loads, demonstrating the successful (but controlled) execution flow of the Log4Shell vulnerability.

**Patterns and recurring elements:**

The changes consistently focus on creating a controlled environment to demonstrate the Log4Shell vulnerability. This includes:
*   Using Maven (`pom.xml`) to manage dependencies, specifically the vulnerable Log4j library.
*   Explicitly noting components as "Vulnerable" or "DEMO" for educational clarity, especially regarding the Log4j version and the benign nature of the exploit class.
*   Implementing a "safety" mechanism (`SafeLoader`) to restrict the scope of the exploit to a specific, local URL, preventing unintended consequences while still showing the mechanism of remote class loading.
*   The timestamps indicate a rapid, sequential development or configuration of the demo environment, suggesting the entire setup was completed in less than half an hour.

## 5:52:06 PM
The code changes document the setup of a `log4shell-demo` project, likely for educational or testing purposes, over a concentrated period on October 23, 2025, between 12:45 PM and 1:11 PM.

**File-Specific Updates:**

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/pom.xml (Initial at 12:45:06 PM, Updated at 1:05:09 PM):**
    *   Initially, the `pom.xml` defined a basic Maven project (`log4shell-sim`) using Java 11, configured with the `maven-shade-plugin` to create a fat JAR with `com.demo.VulnServer` as the main class.
    *   A significant update changed the `artifactId` to `log4j-demo` and, critically, introduced **vulnerable Log4j dependencies (version 2.14.1)** for both `log4j-api` and `log4j-core`. This explicit inclusion of a known vulnerable version is central to the demo's purpose.

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/log4j2.xml (1:05:57 PM):**
    *   A new Log4j2 configuration file was added. It sets up a basic console appender with a `PatternLayout` and configures the root logger to `info` level, enabling the use of the Log4j library.

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/VulnServer.java (1:08:26 PM):**
    *   This new file establishes the core vulnerable application. It defines an `HttpServer` listening on `127.0.0.1:8080`. The server's `HttpHandler` logs the `User-Agent` header from incoming requests using the vulnerable Log4j library (`logger.info("Received User-Agent: " + ua)`). Importantly, it also explicitly calls `SafeLoader.tryHandleLookup(ua)`, indicating an attempt to control or demonstrate the JNDI lookup process.

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/demo/SafeLoader.java (1:09:29 PM):**
    *   This new component implements a controlled mechanism for handling potential JNDI lookups. It uses a regular expression to detect JNDI patterns in input strings but strictly enforces that only the URL `http://127.0.0.1:8000/ExploitClass.class` is allowed. It then fetches bytes from this allowed URL and dynamically defines and instantiates the `ExploitClass` using a custom `ClassLoader`. This demonstrates the Log4j vulnerability's class loading aspect in a safe, restricted manner.

*   **/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/exploit/ExploitClass.java (1:11:12 PM):**
    *   This new file contains a benign "exploit" class. `ExploitClass` has no package and simply prints messages from its static initializer and constructor when loaded, serving as a confirmation that the `SafeLoader` successfully performed a controlled remote class load.

**Timestamps of Significant Changes:**
The entire sequence of changes occurs within a span of approximately 26 minutes on October 23, 2025, highlighting a focused session:
*   **1:05:09 PM:** Crucial update to `pom.xml` to include vulnerable Log4j dependencies.
*   **1:05:57 PM - 1:11:12 PM:** Rapid creation of `log4j2.xml`, `VulnServer.java`, `SafeLoader.java`, and `ExploitClass.java` to set up the Log4Shell demo infrastructure.

**Patterns and Recurring Elements:**

*   **Demo Purpose:** The project is clearly labeled as a "log4shell-demo," and comments emphasize running it "ONLY in isolated lab" and highlight "SAFETY," indicating its role in demonstrating a vulnerability in a controlled, non-malicious context.
*   **`com.demo` Package:** All custom Java classes are part of the `com.demo` package, establishing a consistent project structure.
*   **Java 11:** The project consistently uses Java 11 for compilation and execution.
*   **Maven Shade Plugin:** The `maven-shade-plugin` is utilized to create a self-contained "fat jar," simplifying deployment of the demo application.
*   **Controlled Exploitation:** A key pattern is the implementation of `SafeLoader` to explicitly restrict the JNDI lookup to a local, predefined "exploit" class, preventing actual remote code execution and ensuring the demo remains benign.