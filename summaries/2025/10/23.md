# Activity Summary for 10/23/2025

## 1:27:54 PM
The logged changes describe the setup of a `log4shell-demo` project, likely for educational or testing purposes, focusing on the Log4j vulnerability. All modifications occurred on 10/23/2025, within a concise period from 12:45 PM to 1:11 PM, indicating a single concentrated development session.

**File-Specific Updates:**

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/pom.xml`**:
    *   **Initial setup (12:45:06 PM):** The project was initialized as a Maven project `log4shell-sim`, configured for Java 11, and included the `maven-shade-plugin` to create a fat jar with `com.demo.VulnServer` as the main class.
    *   **Significant update (1:05:09 PM):** The `artifactId` was changed to `log4j-demo`. Crucially, dependencies for `log4j-api` and `log4j-core` (version 2.14.1) were added, explicitly noted as "Vulnerable Log4j for demo (run ONLY in isolated lab)," highlighting the project's purpose.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/log4j2.xml` (1:05:57 PM):**
    *   A new Log4j configuration file was added. It defines a basic `Console` appender with a standard pattern layout and sets the `Root` logger level to `info`.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/VulnServer.java` (1:08:26 PM):**
    *   A new Java file `VulnServer` was introduced. This class sets up an HTTP server listening on `127.0.0.1:8080`.
    *   It logs the `User-Agent` header of incoming requests using the configured Log4j logger (`logger.info("Received User-Agent: " + ua)`), demonstrating where untrusted input could trigger the Log4j vulnerability.
    *   A critical safety mechanism is noted: instead of relying on Log4j's JNDI/remote classloading, it explicitly calls `SafeLoader.tryHandleLookup(ua)` for a controlled demonstration.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/demo/SafeLoader.java` (1:09:29 PM):**
    *   This new `SafeLoader` class is central to the controlled demonstration. It uses a regex to identify JNDI lookup patterns in an input string.
    *   **Key safety feature:** It strictly whitelists the URL from which a class can be loaded to `http://127.0.0.1:8000/ExploitClass.class`. Any other URL is rejected.
    *   It includes functionality to fetch class bytes from the allowed URL and load them using a custom `ClassLoader`, then instantiates the loaded class to confirm execution.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/exploit/ExploitClass.java` (1:11:12 PM):**
    *   A new `ExploitClass` file (without a package) was added in an `exploit` directory. This class contains `static` and constructor blocks that print messages, serving as a benign payload to confirm successful loading and execution within the `SafeLoader`'s controlled environment.

**Patterns and Recurring Elements:**

The changes consistently highlight a focus on demonstrating the Log4j vulnerability in a **controlled and safe manner**. This is evident through:
*   Explicit comments in `pom.xml` ("run ONLY in isolated lab").
*   The `VulnServer` bypassing direct Log4j JNDI handling in favor of `SafeLoader`.
*   The `SafeLoader`'s strict URL whitelisting (`http://127.0.0.1:8000/ExploitClass.class`).
*   The `ExploitClass` being labeled as "benign".

The project utilizes Maven for dependency management and building, including the `maven-shade-plugin` to create an executable jar. The development activity was concentrated within a short timeframe on a single day.

## 2:27:57 PM
The log details the setup and configuration of a `log4shell-demo` project over a concentrated period on October 23, 2025.

**File-Specific Updates:**

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/pom.xml`**
    *   **10/23/2025, 12:45:06 PM:** Initial Maven project configuration, defining `log4shell-sim` as the artifact ID and setting Java 11. It included the `maven-shade-plugin` to create a fat JAR with `com.demo.VulnServer` as the main class.
    *   **10/23/2025, 1:05:09 PM:** This file was significantly updated. The artifact ID changed to `log4j-demo`. Crucially, it introduced `dependencies` for `log4j-api` and `log4j-core`, both at the vulnerable `2.14.1` version, explicitly noting their use for a demo in an isolated lab. The `maven-shade-plugin` configuration remained consistent.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/log4j2.xml`**
    *   **10/23/2025, 1:05:57 PM:** A new file was added to configure Log4j2. It sets a `WARN` status, defines a console appender with a standard pattern layout, and configures the root logger to the `info` level. This file is essential for Log4j to function as intended in the demo.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/VulnServer.java`**
    *   **10/23/2025, 1:08:26 PM:** This new file defines `com.demo.VulnServer`, a simple HTTP server listening on `127.0.0.1:8080`. It uses the vulnerable Log4j by logging the `User-Agent` header from incoming requests (`logger.info("Received User-Agent: " + ua);`), which is the entry point for the Log4shell demonstration. The code also includes a call to `SafeLoader.tryHandleLookup(ua)`, indicating a controlled mechanism for handling potential JNDI lookups.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/src/main/java/com/demo/SafeLoader.java`**
    *   **10/23/2025, 1:09:29 PM:** This new file implements `com.demo.SafeLoader`. It's designed to parse JNDI lookup strings from input (`$\{jndi:...\}`), but with strict safety measures. It explicitly allows fetching class bytes *only* from `http://127.0.0.1:8000/ExploitClass.class` and loads this class using a custom ClassLoader to ensure local and controlled execution, printing messages about the process. This acts as a protective wrapper for the vulnerability demo.

*   **`/Users/zhihao/Desktop/NTU/SC3010/log4shell-demo/exploit/ExploitClass.java`**
    *   **10/23/2025, 1:11:12 PM:** This new file defines `ExploitClass` without a package. It contains a static initializer block and a constructor that print benign messages when executed, confirming that code loading and execution occurred as part of the safe demonstration.

**Timestamps of Significant Changes:**
All significant changes occurred within a relatively short timeframe on `10/23/2025`, primarily between `12:45 PM` and `1:11 PM`, suggesting a focused effort to set up this demonstration environment. The update to `pom.xml` at `1:05:09 PM` to include the vulnerable Log4j dependencies is a pivotal moment in establishing the demo's core functionality.

**Patterns or Recurring Elements:**
*   **Log4shell Demonstration:** The entire set of changes is geared towards demonstrating the Log4shell vulnerability. This is evident from the inclusion of specific Log4j versions, the `VulnServer` logging user input, and the controlled "exploit" class.
*   **Safety and Containment:** A strong recurring theme is the implementation of safety measures to contain the demonstration. The `pom.xml` explicitly warns about isolated lab use, `SafeLoader` strictly whitelists the exploitable URL and class, and `ExploitClass` contains only benign print statements.
*   **Maven Build:** The `pom.xml` consistently uses the `maven-shade-plugin` to create a "fat" JAR, indicating an intention to bundle all dependencies for easy deployment of the demo server.
*   **Localhost Focus:** The `VulnServer` listens on `127.0.0.1` and `SafeLoader` restricts fetching to `http://127.0.0.1:8000`, reinforcing the local and contained nature of the demo.