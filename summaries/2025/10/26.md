# Activity Summary for 10/26/2025

## 10:09:58 PM
The log details changes to a single file: `/Users/zhihao/Desktop/NTU/SC3010/log4j-shell-poc/poc.py`. This Python script implements a Proof-of-Concept (PoC) for the Log4j vulnerability (CVE-2021-44228), designed to create and serve a malicious Java class via an LDAP and HTTP server to achieve a reverse shell.

**File-Specific Updates for `/Users/zhihao/Desktop/NTU/SC3010/log4j-shell-poc/poc.py`:**

*   **Initial State (Timestamp: 10/26/2025, 9:38:42 PM):**
    *   The script was fully functional, setting up an HTTP server and an LDAP server (using `marshalsec`) to deliver a Java-based reverse shell payload.
    *   The `generate_payload` function compiled the `Exploit.java` using `jdk1.8.0_20/bin/javac` from a bundled JDK.
    *   However, the `check_java` and `ldap_server` functions were configured to use a more generic `os.path.join(CUR_FOLDER, 'java')` executable for running Java commands, with the `jdk1.8.0_20/bin/java` path commented out or not directly used in these specific instances.

*   **Subsequent Update (Timestamp: 10/26/2025, 9:57:15 PM):**
    *   The primary change was the standardization of the Java executable path. The lines in the `check_java` and `ldap_server` functions that referred to `os.path.join(CUR_FOLDER, 'java')` were updated. They now explicitly use `os.path.join(CUR_FOLDER, 'jdk1.8.0_20/bin/java')`, aligning them with the path used for `javac` in the `generate_payload` function. This ensures that all Java-related operations within the script consistently point to the specific bundled JDK version.

**Timestamps of Significant Changes:**
The changes occurred rapidly, with the initial version logged at 10/26/2025, 9:38:42 PM, and the update following shortly after at 10/26/2025, 9:57:15 PM, suggesting a quick refinement or correction.

**Patterns and Recurring Elements:**

*   **Purpose:** The script's core purpose remains consistent: exploiting Log4j to achieve a reverse shell.
*   **Tooling:** It consistently leverages Python's `subprocess` module to interact with system commands (like `javac` and `java`), `threading` for concurrent server operations, `http.server` for the web server, and `marshalsec` for the LDAP server.
*   **Path Resolution:** The `CUR_FOLDER` variable and `os.path.join` are heavily used to ensure relative paths to bundled tools (like the JDK and `marshalsec.jar`) are resolved correctly.
*   **User Interaction:** `argparse` is used to define command-line arguments for user IP, web server port, and listener port. `colorama` is used throughout for enhanced terminal output.
*   **Java Reverse Shell:** The Java `Exploit` class, responsible for establishing the reverse shell, remains unchanged in its logic across both versions.
*   **CVE Reference:** The script consistently displays a banner referencing CVE-2021-44228.

## 11:10:01 PM
The file `/Users/zhihao/Desktop/NTU/SC3010/log4j-shell-poc/poc.py` was updated twice on October 26, 2025.

**Key Information from Changes:**

*   **File:** `/Users/zhihao/Desktop/NTU/SC3010/log4j-shell-poc/poc.py`
    *   This Python script serves as a Proof-of-Concept (PoC) for the Log4j shell vulnerability (CVE-2021-44228).
    *   It's designed to generate and compile a Java exploit class, set up an LDAP server using `marshalsec`, and launch a simple HTTP server to serve the compiled exploit.
    *   The script uses `argparse` for command-line arguments, `colorama` for colored output, and `subprocess` for executing external commands like `javac` and `java`.

*   **Significant Timestamps & Updates:**
    *   **10/26/2025, 9:38:42 PM:** At this timestamp, the `check_java()` and `ldap_server()` functions in the `poc.py` script were configured to execute a `java` command by referencing `os.path.join(CUR_FOLDER, 'java')`. There were commented-out lines indicating an alternative path (`jdk1.8.0_20/bin/java`), suggesting initial experimentation or a placeholder for the Java executable path.
    *   **10/26/2025, 9:57:15 PM:** Roughly 18 minutes later, the script was updated to explicitly use the `java` executable located at `os.path.join(CUR_FOLDER, 'jdk1.8.0_20/bin/java')` within both the `check_java()` and `ldap_server()` functions. The previously commented-out lines were made active, and the less specific `os.path.join(CUR_FOLDER, 'java')` references were removed.

*   **Patterns/Recurring Elements:**
    *   The core functionality of the `poc.py` script, including payload generation, LDAP server setup, and web server, remained consistent across both versions.
    *   The main pattern observed in the changes is a refinement in how the script locates and executes the Java runtime environment (JRE/JDK). The initial version seemed to be testing with a more generic `java` binary path, while the later version specifically hardcoded the path to a `jdk1.8.0_20/bin/java` binary located within the current folder, ensuring consistency for both checking the Java version and running the `marshalsec` LDAP server. This indicates an effort to make the PoC self-contained with a specific Java version.